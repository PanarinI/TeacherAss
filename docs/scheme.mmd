graph TD
    A[Пользователь загружает изображение] --> B[Загрузка на Catbox.moe]
    B --> C[Запрос к GPT-4o-mini для анализа]
    C --> D{Определены subject/textbook?}
    D -->|Да| E[Автозаполнение полей]
    D -->|Нет| F[Ручной ввод]
    E --> G[Настройки урока]
    F --> G
    G --> H[Генерация промпта]
    H --> I[Запрос к GPT-4o-mini]
    I --> J[Отображение плана урока]
    J --> K[Скачивание DOCX]